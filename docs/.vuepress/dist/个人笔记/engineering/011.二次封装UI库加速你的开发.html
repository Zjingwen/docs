<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>011.抹平UI库差异性来加速你的开发 | 伪公知的生活常态</title>
    <meta name="description" content="就是随便写写而已">
    
    
    <link rel="preload" href="/docs-interview/assets/css/0.styles.5db48745.css" as="style"><link rel="preload" href="/docs-interview/assets/js/app.95d31192.js" as="script"><link rel="preload" href="/docs-interview/assets/js/2.387e38e1.js" as="script"><link rel="preload" href="/docs-interview/assets/js/26.cf397d24.js" as="script"><link rel="prefetch" href="/docs-interview/assets/js/10.3d791bab.js"><link rel="prefetch" href="/docs-interview/assets/js/100.26536cc9.js"><link rel="prefetch" href="/docs-interview/assets/js/101.ef604d61.js"><link rel="prefetch" href="/docs-interview/assets/js/102.7e3745f8.js"><link rel="prefetch" href="/docs-interview/assets/js/103.dd883182.js"><link rel="prefetch" href="/docs-interview/assets/js/104.79252216.js"><link rel="prefetch" href="/docs-interview/assets/js/105.c827c675.js"><link rel="prefetch" href="/docs-interview/assets/js/106.89a21ec7.js"><link rel="prefetch" href="/docs-interview/assets/js/107.0c04e9d8.js"><link rel="prefetch" href="/docs-interview/assets/js/108.d49a0e1d.js"><link rel="prefetch" href="/docs-interview/assets/js/109.8fa00ff0.js"><link rel="prefetch" href="/docs-interview/assets/js/11.e7b6e7fe.js"><link rel="prefetch" href="/docs-interview/assets/js/110.eb0cdcaa.js"><link rel="prefetch" href="/docs-interview/assets/js/111.5d84d049.js"><link rel="prefetch" href="/docs-interview/assets/js/112.026e50e0.js"><link rel="prefetch" href="/docs-interview/assets/js/113.4af81b4c.js"><link rel="prefetch" href="/docs-interview/assets/js/114.65b24c1f.js"><link rel="prefetch" href="/docs-interview/assets/js/115.ab03d442.js"><link rel="prefetch" href="/docs-interview/assets/js/116.4cabfb7a.js"><link rel="prefetch" href="/docs-interview/assets/js/117.b866a639.js"><link rel="prefetch" href="/docs-interview/assets/js/118.4e903d7a.js"><link rel="prefetch" href="/docs-interview/assets/js/119.6d8406b8.js"><link rel="prefetch" href="/docs-interview/assets/js/12.d872e8ea.js"><link rel="prefetch" href="/docs-interview/assets/js/120.10dbccf5.js"><link rel="prefetch" href="/docs-interview/assets/js/121.f62c4740.js"><link rel="prefetch" href="/docs-interview/assets/js/122.2e228b20.js"><link rel="prefetch" href="/docs-interview/assets/js/123.ee925db9.js"><link rel="prefetch" href="/docs-interview/assets/js/124.cbb6d23a.js"><link rel="prefetch" href="/docs-interview/assets/js/125.71f51813.js"><link rel="prefetch" href="/docs-interview/assets/js/126.8001dc97.js"><link rel="prefetch" href="/docs-interview/assets/js/127.0a8c3722.js"><link rel="prefetch" href="/docs-interview/assets/js/128.e12abd8a.js"><link rel="prefetch" href="/docs-interview/assets/js/129.522f352d.js"><link rel="prefetch" href="/docs-interview/assets/js/13.7b075aef.js"><link rel="prefetch" href="/docs-interview/assets/js/130.19f0c66a.js"><link rel="prefetch" href="/docs-interview/assets/js/131.f00f9466.js"><link rel="prefetch" href="/docs-interview/assets/js/132.4b0118bd.js"><link rel="prefetch" href="/docs-interview/assets/js/133.f3f8534a.js"><link rel="prefetch" href="/docs-interview/assets/js/134.65772645.js"><link rel="prefetch" href="/docs-interview/assets/js/135.c110e3ec.js"><link rel="prefetch" href="/docs-interview/assets/js/136.47679aee.js"><link rel="prefetch" href="/docs-interview/assets/js/137.3cb1e73e.js"><link rel="prefetch" href="/docs-interview/assets/js/138.83e86e9f.js"><link rel="prefetch" href="/docs-interview/assets/js/139.ac6b71e3.js"><link rel="prefetch" href="/docs-interview/assets/js/14.a4e38186.js"><link rel="prefetch" href="/docs-interview/assets/js/140.79b340d4.js"><link rel="prefetch" href="/docs-interview/assets/js/141.4b3c867a.js"><link rel="prefetch" href="/docs-interview/assets/js/142.be834fd0.js"><link rel="prefetch" href="/docs-interview/assets/js/143.b147bf79.js"><link rel="prefetch" href="/docs-interview/assets/js/144.0573c750.js"><link rel="prefetch" href="/docs-interview/assets/js/15.13b1d63f.js"><link rel="prefetch" href="/docs-interview/assets/js/16.d53c70f1.js"><link rel="prefetch" href="/docs-interview/assets/js/17.17b5fcbe.js"><link rel="prefetch" href="/docs-interview/assets/js/18.5589dd51.js"><link rel="prefetch" href="/docs-interview/assets/js/19.446dab5a.js"><link rel="prefetch" href="/docs-interview/assets/js/20.351088ff.js"><link rel="prefetch" href="/docs-interview/assets/js/21.dceec1d2.js"><link rel="prefetch" href="/docs-interview/assets/js/22.fa7f6c47.js"><link rel="prefetch" href="/docs-interview/assets/js/23.a2c2a19a.js"><link rel="prefetch" href="/docs-interview/assets/js/24.b5676ea3.js"><link rel="prefetch" href="/docs-interview/assets/js/25.eb9588a1.js"><link rel="prefetch" href="/docs-interview/assets/js/27.1da5c841.js"><link rel="prefetch" href="/docs-interview/assets/js/28.26285cb6.js"><link rel="prefetch" href="/docs-interview/assets/js/29.4d4a7d7f.js"><link rel="prefetch" href="/docs-interview/assets/js/3.e24aff58.js"><link rel="prefetch" href="/docs-interview/assets/js/30.21cc19bf.js"><link rel="prefetch" href="/docs-interview/assets/js/31.f1b289e2.js"><link rel="prefetch" href="/docs-interview/assets/js/32.723e67e2.js"><link rel="prefetch" href="/docs-interview/assets/js/33.02053b5b.js"><link rel="prefetch" href="/docs-interview/assets/js/34.5e62f8a4.js"><link rel="prefetch" href="/docs-interview/assets/js/35.63c58f1e.js"><link rel="prefetch" href="/docs-interview/assets/js/36.06f274ed.js"><link rel="prefetch" href="/docs-interview/assets/js/37.ea004859.js"><link rel="prefetch" href="/docs-interview/assets/js/38.d3d9c594.js"><link rel="prefetch" href="/docs-interview/assets/js/39.c5af91c3.js"><link rel="prefetch" href="/docs-interview/assets/js/4.e2e0255b.js"><link rel="prefetch" href="/docs-interview/assets/js/40.d48fe4bb.js"><link rel="prefetch" href="/docs-interview/assets/js/41.b2215e85.js"><link rel="prefetch" href="/docs-interview/assets/js/42.6ecc20b2.js"><link rel="prefetch" href="/docs-interview/assets/js/43.d48d7214.js"><link rel="prefetch" href="/docs-interview/assets/js/44.f56d3e66.js"><link rel="prefetch" href="/docs-interview/assets/js/45.7c5d2214.js"><link rel="prefetch" href="/docs-interview/assets/js/46.cad73163.js"><link rel="prefetch" href="/docs-interview/assets/js/47.3a25ff94.js"><link rel="prefetch" href="/docs-interview/assets/js/48.98d159e1.js"><link rel="prefetch" href="/docs-interview/assets/js/49.fe28623a.js"><link rel="prefetch" href="/docs-interview/assets/js/5.cd3fd4c9.js"><link rel="prefetch" href="/docs-interview/assets/js/50.f2d2864e.js"><link rel="prefetch" href="/docs-interview/assets/js/51.3e9ede3a.js"><link rel="prefetch" href="/docs-interview/assets/js/52.ca7b5f42.js"><link rel="prefetch" href="/docs-interview/assets/js/53.b47bf86d.js"><link rel="prefetch" href="/docs-interview/assets/js/54.6a2cbaf5.js"><link rel="prefetch" href="/docs-interview/assets/js/55.91582a90.js"><link rel="prefetch" href="/docs-interview/assets/js/56.f86be0ea.js"><link rel="prefetch" href="/docs-interview/assets/js/57.9736ae8a.js"><link rel="prefetch" href="/docs-interview/assets/js/58.6733876e.js"><link rel="prefetch" href="/docs-interview/assets/js/59.4427ecfe.js"><link rel="prefetch" href="/docs-interview/assets/js/6.0d618875.js"><link rel="prefetch" href="/docs-interview/assets/js/60.b550f66b.js"><link rel="prefetch" href="/docs-interview/assets/js/61.ee9258ec.js"><link rel="prefetch" href="/docs-interview/assets/js/62.db3c66c4.js"><link rel="prefetch" href="/docs-interview/assets/js/63.d2fd7240.js"><link rel="prefetch" href="/docs-interview/assets/js/64.258b5a42.js"><link rel="prefetch" href="/docs-interview/assets/js/65.bb395bbf.js"><link rel="prefetch" href="/docs-interview/assets/js/66.bd6896bd.js"><link rel="prefetch" href="/docs-interview/assets/js/67.37657eee.js"><link rel="prefetch" href="/docs-interview/assets/js/68.d823ca9e.js"><link rel="prefetch" href="/docs-interview/assets/js/69.0f13b4d0.js"><link rel="prefetch" href="/docs-interview/assets/js/7.2302c4c8.js"><link rel="prefetch" href="/docs-interview/assets/js/70.2c1ecb69.js"><link rel="prefetch" href="/docs-interview/assets/js/71.6aee0b5d.js"><link rel="prefetch" href="/docs-interview/assets/js/72.9804d57b.js"><link rel="prefetch" href="/docs-interview/assets/js/73.a362afdf.js"><link rel="prefetch" href="/docs-interview/assets/js/74.00b3e003.js"><link rel="prefetch" href="/docs-interview/assets/js/75.3ba2741c.js"><link rel="prefetch" href="/docs-interview/assets/js/76.b155e834.js"><link rel="prefetch" href="/docs-interview/assets/js/77.c0806518.js"><link rel="prefetch" href="/docs-interview/assets/js/78.f145e4e5.js"><link rel="prefetch" href="/docs-interview/assets/js/79.b18eb052.js"><link rel="prefetch" href="/docs-interview/assets/js/8.01ef5034.js"><link rel="prefetch" href="/docs-interview/assets/js/80.166faa3b.js"><link rel="prefetch" href="/docs-interview/assets/js/81.a8e13dd1.js"><link rel="prefetch" href="/docs-interview/assets/js/82.bc659265.js"><link rel="prefetch" href="/docs-interview/assets/js/83.d4d2767e.js"><link rel="prefetch" href="/docs-interview/assets/js/84.e59df14e.js"><link rel="prefetch" href="/docs-interview/assets/js/85.60f7cc9e.js"><link rel="prefetch" href="/docs-interview/assets/js/86.02c79022.js"><link rel="prefetch" href="/docs-interview/assets/js/87.cd092a77.js"><link rel="prefetch" href="/docs-interview/assets/js/88.ce7120fa.js"><link rel="prefetch" href="/docs-interview/assets/js/89.eca17faa.js"><link rel="prefetch" href="/docs-interview/assets/js/9.062415ef.js"><link rel="prefetch" href="/docs-interview/assets/js/90.81085990.js"><link rel="prefetch" href="/docs-interview/assets/js/91.1dc2aee4.js"><link rel="prefetch" href="/docs-interview/assets/js/92.229f99c0.js"><link rel="prefetch" href="/docs-interview/assets/js/93.b4169369.js"><link rel="prefetch" href="/docs-interview/assets/js/94.fdf0a2cb.js"><link rel="prefetch" href="/docs-interview/assets/js/95.2fb1a9f0.js"><link rel="prefetch" href="/docs-interview/assets/js/96.2d63b1cb.js"><link rel="prefetch" href="/docs-interview/assets/js/97.efed770d.js"><link rel="prefetch" href="/docs-interview/assets/js/98.c6c86090.js"><link rel="prefetch" href="/docs-interview/assets/js/99.c0733e0b.js">
    <link rel="stylesheet" href="/docs-interview/assets/css/0.styles.5db48745.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs-interview/" class="home-link router-link-active"><!----> <span class="site-name">伪公知的生活常态</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/docs-interview/%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/" class="sidebar-link">个人笔记</a></li><li><a href="/docs-interview/%E6%94%B6%E8%97%8F%E7%AC%94%E8%AE%B0/" class="sidebar-link">收藏笔记</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_011-抹平ui库差异性来加速你的开发"><a href="#_011-抹平ui库差异性来加速你的开发" aria-hidden="true" class="header-anchor">#</a> 011.抹平UI库差异性来加速你的开发</h1> <h2 id="意义"><a href="#意义" aria-hidden="true" class="header-anchor">#</a> 意义</h2> <p>在日常业务开发中，我发现很多人会习惯于，直接拿UI库+业务代码的形式，去做日常开发，并且持之以恒。这不是错误，只是在求快的前提下，做的妥协而已。当然对于项目初期，我举双手赞同这种模式。但是当业务随着时间的推移，产品模式的固定，交互模式的固定，那么这种形式势必需要抛弃。&quot;模式库&quot;就要需要上线了。</p> <p>模式库的含义是，根据现有业务，根据既定交互，结合UI库+业务的组合形式，并且以纯数据组织，实现业务开发。这样做的优势在于，提高开发效率，将UI展现实行一致化，提高可维护性。下面，我以ant-design为UI库，结合一些常见业务进行解释。</p> <h2 id="搜索功能"><a href="#搜索功能" aria-hidden="true" class="header-anchor">#</a> 搜索功能</h2> <h3 id="具体业务分析"><a href="#具体业务分析" aria-hidden="true" class="header-anchor">#</a> 具体业务分析</h3> <p>例子：https://codesandbox.io/embed/magical-sky-ood2o?fontsize=14</p> <p>这是一个常见的搜索功能，我们会涉及到，Input, Checkbox, DatePicker, TimePicker, Row, Col, Button, Typography组件。首先这种业务需求是可以固化的，不管是在前台、后台都是如此，并没有太多套路可言。</p> <p>共性：一组表单，点击提交将表单的name和value返回出来，点击重置将默认值赋值给表单。</p> <p>差异性：DatePicker, TimePicker的中是依靠dateString、timeString来返回值，而且没有name值。Checkbox是依靠event.target.checked来返回值，而且还要给其内容传递值。</p> <p>为何不直接使用form组件？因为不符合UI同学的需求，不符合产品同学的需求。这种自由的组合形式，在扩展上，是最合理的。</p> <p>收集好共性，以及差异性之后，可以思考如何用数据的形式组合。好吧这里想都不用想<code>json-schema</code>是最优解。</p> <p>例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  reset<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token comment">// 复制重置数据</span>
    name<span class="token operator">:</span> 'string'<span class="token punctuation">,</span><span class="token comment">// 对应的name</span>
    value<span class="token operator">:</span> 'string|number'<span class="token punctuation">,</span><span class="token comment">// 初始值</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  map<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> 'input'<span class="token punctuation">,</span><span class="token comment">// 类型</span>
      label<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// title</span>
      name<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// return的name值</span>
      value<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// return的value值，以及初始值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> 'time'<span class="token punctuation">,</span><span class="token comment">// 类型</span>
      label<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// title</span>
      name<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// return的name值</span>
      value<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// return的value值，以及初始值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> 'checkbox'<span class="token punctuation">,</span><span class="token comment">// 类型</span>
      label<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// title</span>
      name<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// return的name值</span>
      value<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// return的value值，以及初始值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> 'date'<span class="token punctuation">,</span><span class="token comment">// 类型</span>
      label<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// title</span>
      name<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// return的name值</span>
      value<span class="token operator">:</span> ''<span class="token punctuation">,</span><span class="token comment">// return的value值，以及初始值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>抹平onChange差异，这里我会包装DatePicker、TimePicker、Checkbox、Input的onChange方法，统一返回<code>{name: '',value: ''}</code>,这样业务层的处理就能高度统一。</p> <h3 id="设计组件"><a href="#设计组件" aria-hidden="true" class="header-anchor">#</a> 设计组件</h3> <p>最后成果</p> <p><img src="http://oss1.lanlanlife.com/c0a8a4dc435a504190742c234aa9a8eb_2272x1162.png" alt="end"></p> <p>form组件</p> <p>接口设计：</p> <ul><li><code>col</code>，控制行数</li> <li><code>$emitReset(e)</code>，点击重置回调，返回重置之后的数据</li> <li><code>$emitSubmit(e)</code>，点击提交回调，返回提交的数据</li> <li><code>reset</code>，重置的数据结构</li> <li><code>map</code>，表单的数据结构</li></ul> <p><img src="http://oss2.lanlanlife.com/8ae8758c7dbadb50332e888af2b1f377_4972x1588.png" alt="code1"></p> <p>Checkbox组件</p> <p>接口设计：</p> <ul><li><code>name</code>，返回名</li> <li><code>value</code>，默认值</li> <li><code>label</code>，显示名</li> <li><code>onChange(e)</code>，变化回调</li></ul> <p><img src="http://oss.lanlanlife.com/5f04eab587b2d1eaf3452a59f407c275_1984x1634.png" alt="checkbox1"></p> <p>Input组件</p> <p>接口设计：</p> <ul><li><code>name</code>，返回名</li> <li><code>value</code>，默认值</li> <li><code>label</code>，显示名</li> <li><code>onChange(e)</code>，变化回调</li></ul> <p><img src="http://oss.lanlanlife.com/2803941c668eb0da9027bc55bf1b5204_1840x1500.png" alt="input"></p> <p>DatePicker组件</p> <p>接口设计：</p> <ul><li><code>name</code>，返回名</li> <li><code>value</code>，默认值</li> <li><code>label</code>，显示名</li> <li><code>onChange(e)</code>，变化回调</li></ul> <p><img src="http://oss3.lanlanlife.com/311c22066768cd1b84682fac5293b090_1912x1800.png" alt="date"></p> <p>TimePicker组件</p> <p>接口设计：</p> <ul><li><code>name</code>，返回名</li> <li><code>value</code>，默认值</li> <li><code>label</code>，显示名</li> <li><code>onChange(e)</code>，变化回调</li></ul> <p><img src="http://oss3.lanlanlife.com/bcfa448f4975a2cb427c38209ecc7bd9_1948x1674.png" alt="time"></p> <h2 id="合理规划"><a href="#合理规划" aria-hidden="true" class="header-anchor">#</a> 合理规划</h2> <p>合理规划的关注的点在于，如何抹平差异、如何合理组合、如何固化需求。其中所要信奉的代码原则，无非是高解偶、容扩展、少改动。</p> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>我一直很喜欢react的核心理念UI=render(data)，这是现今最适合GUI范畴的理念没有之一。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs-interview/assets/js/app.95d31192.js" defer></script><script src="/docs-interview/assets/js/2.387e38e1.js" defer></script><script src="/docs-interview/assets/js/26.cf397d24.js" defer></script>
  </body>
</html>
