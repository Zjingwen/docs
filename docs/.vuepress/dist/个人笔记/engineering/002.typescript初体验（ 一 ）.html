<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>typescript初体验（ 一 ） | 伪公知的生活常态</title>
    <meta name="description" content="就是随便写写而已">
    
    
    <link rel="preload" href="/doc/assets/css/0.styles.fd39fceb.css" as="style"><link rel="preload" href="/doc/assets/js/app.37ba04a1.js" as="script"><link rel="preload" href="/doc/assets/js/2.387e38e1.js" as="script"><link rel="preload" href="/doc/assets/js/17.9486ef0a.js" as="script"><link rel="prefetch" href="/doc/assets/js/10.5f5b6b11.js"><link rel="prefetch" href="/doc/assets/js/100.26536cc9.js"><link rel="prefetch" href="/doc/assets/js/101.ef604d61.js"><link rel="prefetch" href="/doc/assets/js/102.7713deb6.js"><link rel="prefetch" href="/doc/assets/js/103.b877dd42.js"><link rel="prefetch" href="/doc/assets/js/104.ba65479e.js"><link rel="prefetch" href="/doc/assets/js/105.6e5b3780.js"><link rel="prefetch" href="/doc/assets/js/106.89a21ec7.js"><link rel="prefetch" href="/doc/assets/js/107.0c04e9d8.js"><link rel="prefetch" href="/doc/assets/js/108.d49a0e1d.js"><link rel="prefetch" href="/doc/assets/js/109.8fa00ff0.js"><link rel="prefetch" href="/doc/assets/js/11.a1378e1b.js"><link rel="prefetch" href="/doc/assets/js/110.eb0cdcaa.js"><link rel="prefetch" href="/doc/assets/js/111.5d84d049.js"><link rel="prefetch" href="/doc/assets/js/112.608d6c0a.js"><link rel="prefetch" href="/doc/assets/js/113.a201a826.js"><link rel="prefetch" href="/doc/assets/js/114.ea5d1700.js"><link rel="prefetch" href="/doc/assets/js/115.055b1b5d.js"><link rel="prefetch" href="/doc/assets/js/116.4cabfb7a.js"><link rel="prefetch" href="/doc/assets/js/117.b866a639.js"><link rel="prefetch" href="/doc/assets/js/118.67cf21a2.js"><link rel="prefetch" href="/doc/assets/js/119.4d720e0a.js"><link rel="prefetch" href="/doc/assets/js/12.cd6ab88c.js"><link rel="prefetch" href="/doc/assets/js/120.b6420200.js"><link rel="prefetch" href="/doc/assets/js/121.f62c4740.js"><link rel="prefetch" href="/doc/assets/js/122.2e228b20.js"><link rel="prefetch" href="/doc/assets/js/123.ee925db9.js"><link rel="prefetch" href="/doc/assets/js/124.cbb6d23a.js"><link rel="prefetch" href="/doc/assets/js/125.71f51813.js"><link rel="prefetch" href="/doc/assets/js/126.8001dc97.js"><link rel="prefetch" href="/doc/assets/js/127.0a8c3722.js"><link rel="prefetch" href="/doc/assets/js/128.e0b123f2.js"><link rel="prefetch" href="/doc/assets/js/129.37fbcde0.js"><link rel="prefetch" href="/doc/assets/js/13.147fffe4.js"><link rel="prefetch" href="/doc/assets/js/130.3c8e90ee.js"><link rel="prefetch" href="/doc/assets/js/131.86053ffc.js"><link rel="prefetch" href="/doc/assets/js/132.e4e5ad61.js"><link rel="prefetch" href="/doc/assets/js/133.f3f8534a.js"><link rel="prefetch" href="/doc/assets/js/134.655fd8ee.js"><link rel="prefetch" href="/doc/assets/js/135.c110e3ec.js"><link rel="prefetch" href="/doc/assets/js/136.0b92fdd6.js"><link rel="prefetch" href="/doc/assets/js/137.5ccea8b1.js"><link rel="prefetch" href="/doc/assets/js/138.b2eae4d6.js"><link rel="prefetch" href="/doc/assets/js/139.a4983d50.js"><link rel="prefetch" href="/doc/assets/js/14.51dd794f.js"><link rel="prefetch" href="/doc/assets/js/140.09b4b5e7.js"><link rel="prefetch" href="/doc/assets/js/141.6165faab.js"><link rel="prefetch" href="/doc/assets/js/142.20b8ce46.js"><link rel="prefetch" href="/doc/assets/js/143.5a613b9f.js"><link rel="prefetch" href="/doc/assets/js/144.0573c750.js"><link rel="prefetch" href="/doc/assets/js/15.08a3298b.js"><link rel="prefetch" href="/doc/assets/js/16.31109dad.js"><link rel="prefetch" href="/doc/assets/js/18.5e017411.js"><link rel="prefetch" href="/doc/assets/js/19.446dab5a.js"><link rel="prefetch" href="/doc/assets/js/20.fd6f58e6.js"><link rel="prefetch" href="/doc/assets/js/21.c64790f1.js"><link rel="prefetch" href="/doc/assets/js/22.201393b9.js"><link rel="prefetch" href="/doc/assets/js/23.a2c2a19a.js"><link rel="prefetch" href="/doc/assets/js/24.90392722.js"><link rel="prefetch" href="/doc/assets/js/25.8b23013a.js"><link rel="prefetch" href="/doc/assets/js/26.cf397d24.js"><link rel="prefetch" href="/doc/assets/js/27.1da5c841.js"><link rel="prefetch" href="/doc/assets/js/28.26fca84b.js"><link rel="prefetch" href="/doc/assets/js/29.5ed5fff9.js"><link rel="prefetch" href="/doc/assets/js/3.e24aff58.js"><link rel="prefetch" href="/doc/assets/js/30.144367d7.js"><link rel="prefetch" href="/doc/assets/js/31.12cfe647.js"><link rel="prefetch" href="/doc/assets/js/32.5107626d.js"><link rel="prefetch" href="/doc/assets/js/33.02053b5b.js"><link rel="prefetch" href="/doc/assets/js/34.5e62f8a4.js"><link rel="prefetch" href="/doc/assets/js/35.63c58f1e.js"><link rel="prefetch" href="/doc/assets/js/36.06f274ed.js"><link rel="prefetch" href="/doc/assets/js/37.ea004859.js"><link rel="prefetch" href="/doc/assets/js/38.d3d9c594.js"><link rel="prefetch" href="/doc/assets/js/39.c5af91c3.js"><link rel="prefetch" href="/doc/assets/js/4.e2e0255b.js"><link rel="prefetch" href="/doc/assets/js/40.d48fe4bb.js"><link rel="prefetch" href="/doc/assets/js/41.b2215e85.js"><link rel="prefetch" href="/doc/assets/js/42.6ecc20b2.js"><link rel="prefetch" href="/doc/assets/js/43.d48d7214.js"><link rel="prefetch" href="/doc/assets/js/44.f56d3e66.js"><link rel="prefetch" href="/doc/assets/js/45.7c5d2214.js"><link rel="prefetch" href="/doc/assets/js/46.cad73163.js"><link rel="prefetch" href="/doc/assets/js/47.3a25ff94.js"><link rel="prefetch" href="/doc/assets/js/48.98d159e1.js"><link rel="prefetch" href="/doc/assets/js/49.fe28623a.js"><link rel="prefetch" href="/doc/assets/js/5.cd3fd4c9.js"><link rel="prefetch" href="/doc/assets/js/50.f2d2864e.js"><link rel="prefetch" href="/doc/assets/js/51.3e9ede3a.js"><link rel="prefetch" href="/doc/assets/js/52.ca7b5f42.js"><link rel="prefetch" href="/doc/assets/js/53.b47bf86d.js"><link rel="prefetch" href="/doc/assets/js/54.6a2cbaf5.js"><link rel="prefetch" href="/doc/assets/js/55.91582a90.js"><link rel="prefetch" href="/doc/assets/js/56.f86be0ea.js"><link rel="prefetch" href="/doc/assets/js/57.9736ae8a.js"><link rel="prefetch" href="/doc/assets/js/58.6733876e.js"><link rel="prefetch" href="/doc/assets/js/59.a4a0f2df.js"><link rel="prefetch" href="/doc/assets/js/6.7f28e2d3.js"><link rel="prefetch" href="/doc/assets/js/60.f55b6cb7.js"><link rel="prefetch" href="/doc/assets/js/61.ee9258ec.js"><link rel="prefetch" href="/doc/assets/js/62.d919aadf.js"><link rel="prefetch" href="/doc/assets/js/63.52fea91c.js"><link rel="prefetch" href="/doc/assets/js/64.1e084768.js"><link rel="prefetch" href="/doc/assets/js/65.bb395bbf.js"><link rel="prefetch" href="/doc/assets/js/66.bd6896bd.js"><link rel="prefetch" href="/doc/assets/js/67.37657eee.js"><link rel="prefetch" href="/doc/assets/js/68.d823ca9e.js"><link rel="prefetch" href="/doc/assets/js/69.0f13b4d0.js"><link rel="prefetch" href="/doc/assets/js/7.5ada4c1f.js"><link rel="prefetch" href="/doc/assets/js/70.2c1ecb69.js"><link rel="prefetch" href="/doc/assets/js/71.6aee0b5d.js"><link rel="prefetch" href="/doc/assets/js/72.70289cf9.js"><link rel="prefetch" href="/doc/assets/js/73.b426c2bb.js"><link rel="prefetch" href="/doc/assets/js/74.00b3e003.js"><link rel="prefetch" href="/doc/assets/js/75.ccc6fa42.js"><link rel="prefetch" href="/doc/assets/js/76.270f4c28.js"><link rel="prefetch" href="/doc/assets/js/77.c0806518.js"><link rel="prefetch" href="/doc/assets/js/78.f145e4e5.js"><link rel="prefetch" href="/doc/assets/js/79.d8362f0f.js"><link rel="prefetch" href="/doc/assets/js/8.345a0ef7.js"><link rel="prefetch" href="/doc/assets/js/80.f94e0231.js"><link rel="prefetch" href="/doc/assets/js/81.94080aec.js"><link rel="prefetch" href="/doc/assets/js/82.bc659265.js"><link rel="prefetch" href="/doc/assets/js/83.d4d2767e.js"><link rel="prefetch" href="/doc/assets/js/84.e59df14e.js"><link rel="prefetch" href="/doc/assets/js/85.60f7cc9e.js"><link rel="prefetch" href="/doc/assets/js/86.02c79022.js"><link rel="prefetch" href="/doc/assets/js/87.cd092a77.js"><link rel="prefetch" href="/doc/assets/js/88.ce7120fa.js"><link rel="prefetch" href="/doc/assets/js/89.eca17faa.js"><link rel="prefetch" href="/doc/assets/js/9.631db003.js"><link rel="prefetch" href="/doc/assets/js/90.81085990.js"><link rel="prefetch" href="/doc/assets/js/91.1dc2aee4.js"><link rel="prefetch" href="/doc/assets/js/92.229f99c0.js"><link rel="prefetch" href="/doc/assets/js/93.b4169369.js"><link rel="prefetch" href="/doc/assets/js/94.fdf0a2cb.js"><link rel="prefetch" href="/doc/assets/js/95.1ae19c65.js"><link rel="prefetch" href="/doc/assets/js/96.11dbe007.js"><link rel="prefetch" href="/doc/assets/js/97.d17531e2.js"><link rel="prefetch" href="/doc/assets/js/98.c6c86090.js"><link rel="prefetch" href="/doc/assets/js/99.c0733e0b.js">
    <link rel="stylesheet" href="/doc/assets/css/0.styles.fd39fceb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/doc/" class="home-link router-link-active"><!----> <span class="site-name">伪公知的生活常态</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/doc/%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/" class="sidebar-link">个人笔记</a></li><li><a href="/doc/%E6%94%B6%E8%97%8F%E7%AC%94%E8%AE%B0/" class="sidebar-link">收藏笔记</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript初体验（-一-）"><a href="#typescript初体验（-一-）" aria-hidden="true" class="header-anchor">#</a> typescript初体验（ 一 ）</h1> <h2 id="初衷"><a href="#初衷" aria-hidden="true" class="header-anchor">#</a> 初衷</h2> <blockquote><p>十多年前，Java的繁琐让很多人仇恨类型系统，
他们改用Python、Ruby等动态类型语言，
这使我们能够快速而松散地完成工作。
经过大约十年的热血编程，我们最终发现，动态语言编写的巨大单体项目是非常脆弱的。</p></blockquote> <p>好吧不知道多少次被小伙伴安利过typeScript了，一直感觉这无非是ESMAscript的超集而已，还不着急，可是当项目线逐渐膨胀，我感觉到了脆弱无力。主要无力是两点，一、设计模型的脆弱。二、参数类型的混乱。设计模型是内功需要长时间的修为，还好参数类型的混乱我能用过工具方法阻止。</p> <h2 id="安装简单的学习环境"><a href="#安装简单的学习环境" aria-hidden="true" class="header-anchor">#</a> 安装简单的学习环境</h2> <p>首先我需要安装最简单的测试环境，让我可以测试所有typeScript的所有语法。</p> <h3 id="目录结构"><a href="#目录结构" aria-hidden="true" class="header-anchor">#</a> 目录结构</h3> <div class="language-TEXT extra-class"><pre class="language-text"><code>typescript-demo
|----- config             // 脚本文件
        |----- watch.js   // 监听变化执行tsc命令
|----- src                // 产出目录
        |----- js         // build的js文件集合
        |----- index.html // 主index.html文件
|----- ts                 // ts文件集合
|----- package.json
|----- tsconfig.json
</code></pre></div><h3 id="涉及的npm包"><a href="#涉及的npm包" aria-hidden="true" class="header-anchor">#</a> 涉及的npm包</h3> <div class="language-JSON extra-class"><pre class="language-json"><code><span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;chokidar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;concurrently&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.1.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;live-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.2.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shelljs&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.8.3&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="涉及的指令"><a href="#涉及的指令" aria-hidden="true" class="header-anchor">#</a> 涉及的指令</h3> <div class="language-JSON extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;concurrently \&quot;npm run server\&quot; \&quot;npm run watch\&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;live-server ./src --port=8080&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ts&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./config/watch.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="为什么要这样折腾webpack不是就可以用吗？"><a href="#为什么要这样折腾webpack不是就可以用吗？" aria-hidden="true" class="header-anchor">#</a> 为什么要这样折腾webpack不是就可以用吗？</h2> <p>首先，我需要的是基本0配置的环境，我不想过多折腾环境，我要是的学习。如果我用webpack的话，我可能要配置各种devServer、loader、entry、output等等。可是我的需求只是，开个服务器，监听文件变化，build ts，然后就木了，所以我选择了5个包。</p> <ul><li>chokidar 监听文件变化</li> <li>concurrently 同时执行多个命令</li> <li>live-server 简易服务器</li> <li>shelljs 执行shell命令</li></ul> <p>好吧，我的需求是不是就达到了。然后我只要组合一下就行了。</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// watch.js 文件</span>
<span class="token keyword">const</span> glob <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'glob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> shell <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'shelljs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> chokidar <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chokidar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 监听文件</span>
<span class="token keyword">const</span> watcher <span class="token operator">=</span> chokidar<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span><span class="token punctuation">{</span>
  persistent<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 执行命令</span>
<span class="token keyword">const</span> <span class="token function-variable function">command</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> shell<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'npm run ts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 监听回调用</span>
watcher
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">command</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">command</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'unlink'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">command</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="组合package-script"><a href="#组合package-script" aria-hidden="true" class="header-anchor">#</a> 组合package script</h2> <p>我写了4个script，分别是start、watch、ts、server</p> <ul><li>start   组合watch和server</li> <li>watch   监听文件变化</li> <li>ts      build typeScript</li> <li>server  启动服务器</li></ul> <p>当我需要学习的时候，我只要执行一下start就可以了。对了我没有加入自动刷新，为啥呢？因为我觉得学习的话，自动刷新反而会让我忽略一些细节。还有一个问题就是，这里会全部build所有ts文件，这我倒是感觉没啥问题，毕竟小demo能有几行代码，性能问题就不想了。</p> <h2 id="提醒"><a href="#提醒" aria-hidden="true" class="header-anchor">#</a> 提醒</h2> <ul><li>记得全局安装一下typescript哟</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g typescript
</code></pre></div><ul><li>我所用到的npm版本以及node版本</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&quot;node&quot;: &quot;&gt;=8.9.1&quot;,
&quot;npm&quot;: &quot;&gt;=6.1.0&quot;
</code></pre></div><h2 id="结尾"><a href="#结尾" aria-hidden="true" class="header-anchor">#</a> 结尾</h2> <p>好吧，我用了大概10多分钟，搭建起了这一套简单易用可扩展的测试环境，并且写了两个demo，然后我就可以愉快的学习了。有时候吧，什么需求选择什么构架，慢慢迭代，不用操之过急。</p> <p>献上github欢迎clone：<a href="https://github.com/Zjingwen/typescript-demo" target="_blank" rel="noopener noreferrer">https://github.com/Zjingwen/typescript-demo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/doc/assets/js/app.37ba04a1.js" defer></script><script src="/doc/assets/js/2.387e38e1.js" defer></script><script src="/doc/assets/js/17.9486ef0a.js" defer></script>
  </body>
</html>
